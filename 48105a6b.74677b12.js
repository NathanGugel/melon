(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{100:function(e,n,t){"use strict";t.d(n,"a",(function(){return b})),t.d(n,"b",(function(){return d}));var a=t(0),o=t.n(a);function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){c(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},c=Object.keys(e);for(a=0;a<c.length;a++)t=c[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)t=c[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var u=o.a.createContext({}),l=function(e){var n=o.a.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},b=function(e){var n=l(e.components);return o.a.createElement(u.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return o.a.createElement(o.a.Fragment,{},n)}},p=o.a.forwardRef((function(e,n){var t=e.components,a=e.mdxType,c=e.originalType,r=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),b=l(t),p=a,d=b["".concat(r,".").concat(p)]||b[p]||m[p]||c;return t?o.a.createElement(d,i(i({ref:n},u),{},{components:t})):o.a.createElement(d,i({ref:n},u))}));function d(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var c=t.length,r=new Array(c);r[0]=p;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,r[1]=i;for(var u=2;u<c;u++)r[u]=t[u];return o.a.createElement.apply(null,r)}return o.a.createElement.apply(null,t)}p.displayName="MDXCreateElement"},70:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return r})),t.d(n,"metadata",(function(){return i})),t.d(n,"rightToc",(function(){return s})),t.d(n,"default",(function(){return l}));var a=t(2),o=t(6),c=(t(0),t(100)),r={id:"function",title:"Function",sidebar_label:"Function",slug:"/types/function"},i={unversionedId:"function",id:"function",isDocsHomePage:!1,title:"Function",description:"In melon functions are first-class citizens, this means that functions are a type of value and are not treated any differently from any other value. They can thus be saved inside variables, passed as arguments to other functions or stored inside an Object or Array.",source:"@site/docs/function.md",slug:"/types/function",permalink:"/melon/docs/types/function",editUrl:"https://github.com/daniele-rapagnani/edit/master/docs/docs/function.md",version:"current",sidebar_label:"Function",sidebar:"someSidebar",previous:{title:"Object",permalink:"/melon/docs/types/object"},next:{title:"Range",permalink:"/melon/docs/types/range"}},s=[{value:"Defining functions",id:"defining-functions",children:[{value:"Anonymous functions",id:"anonymous-functions",children:[]},{value:"Labeled functions",id:"labeled-functions",children:[]},{value:"Named functions",id:"named-functions",children:[]}]},{value:"Closures",id:"closures",children:[]},{value:"Methods",id:"methods",children:[]},{value:"Variadic arguments",id:"variadic-arguments",children:[]},{value:"Further function manipulation",id:"further-function-manipulation",children:[]}],u={rightToc:s};function l(e){var n=e.components,t=Object(o.a)(e,["components"]);return Object(c.b)("wrapper",Object(a.a)({},u,t,{components:n,mdxType:"MDXLayout"}),Object(c.b)("p",null,"In melon functions are first-class citizens, this means that functions are a type of value and are not treated any differently from any other value. They can thus be saved inside variables, passed as arguments to other functions or stored inside an ",Object(c.b)("inlineCode",{parentName:"p"},"Object")," or ",Object(c.b)("inlineCode",{parentName:"p"},"Array"),"."),Object(c.b)("h2",{id:"defining-functions"},"Defining functions"),Object(c.b)("p",null,"There are various ways to define a function in melon."),Object(c.b)("h3",{id:"anonymous-functions"},"Anonymous functions"),Object(c.b)("p",null,"We have seen that functions are just another type of value in melon, this means that we can assign a function to a variable as we would with any other type of value:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'let myFunc = => {\n    io.print("This is a function");\n};\n\nmyFunc();\n')),Object(c.b)("p",null,"Arguments in melon are expressed with pipes (",Object(c.b)("inlineCode",{parentName:"p"},"|"),") when defining a function:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'let myFunc = |a, b, c| => {\n    io.print("This is a function:", a, b, c);\n}\n\nmyFunc(1, true, "foo");\n')),Object(c.b)("p",null,"A function can be called with more or less arguments than the one it expects.\nIf the arguments provided are more than the one expected the excess arguments will simply be discarded.\nIf less arguments are provided the arguments that were not specified will have the value ",Object(c.b)("inlineCode",{parentName:"p"},"null"),"."),Object(c.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(c.b)("h5",{parentName:"div"},Object(c.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(c.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(c.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(c.b)("p",{parentName:"div"},"If a function does not return a value using the ",Object(c.b)("inlineCode",{parentName:"p"},"return")," keyword the function will still return the value ",Object(c.b)("inlineCode",{parentName:"p"},"null")))),Object(c.b)("p",null,"You can pass functions as other function's arguments:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'let myFunc = |a| => {\n    io.print("Executing a:");\n    a();\n};\n\nlet myInnerFunc = => {\n    io.print("It\'s good to be a first-class citizen!");\n};\n\nmyFunc(myInnerFunc);\n')),Object(c.b)("p",null,"You can store functions in an ",Object(c.b)("inlineCode",{parentName:"p"},"Object")," or an ",Object(c.b)("inlineCode",{parentName:"p"},"Array"),":"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'let myObj = {\n    myFunc = => {\n        io.print("I\'m inside an object!");\n    }\n};\n\nmyObj.myFunc();\n')),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'let myArr = [\n    => {\n        io.print("I\'m inside an array!");\n        return 10;\n    }\n];\n\nlet myValue = myArr[0]();\n\nio.print(myValue); // 10\n')),Object(c.b)("p",null,"Storing ",Object(c.b)("inlineCode",{parentName:"p"},"Function")," values inside an ",Object(c.b)("inlineCode",{parentName:"p"},"Object")," can be used to do OOP, see also ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"/melon/docs/types/object#method-access-operator"}),Object(c.b)("inlineCode",{parentName:"a"},"Object"))," and ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"#methods"}),Object(c.b)("inlineCode",{parentName:"a"},"Methods"))),Object(c.b)("h3",{id:"labeled-functions"},"Labeled functions"),Object(c.b)("p",null,"Anonymous functions can sometime be hard to debug, especially when using ",Object(c.b)("inlineCode",{parentName:"p"},"io.print")," to print them:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"let myFunc = => { return 10; };\n\nio.print(myFunc); // [Closure @anonymous@]\n")),Object(c.b)("p",null,"To make it easier to identify functions when debugging you can label them with the following syntax:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"let myFunc = func myFunc => { return 10; };\n\nio.print(myFunc); // [Closure myFunc]\n")),Object(c.b)("h3",{id:"named-functions"},"Named functions"),Object(c.b)("p",null,"The most concise way to define a function is by using the named function syntax:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'func myFunc => {\n    io.print("This is a function");\n}\n\nmyFunc();\n')),Object(c.b)("p",null,"This is just syntactic sugar for:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'let myFunc = func myFunc => {\n    io.print("This is a function");\n}\n\nmyFunc();\n')),Object(c.b)("h2",{id:"closures"},"Closures"),Object(c.b)("p",null,"Closures are functions which capture values outside of the function itself:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"let someValue = 10;\n\nlet myFunc = |a| => {\n    return a + someValue;\n};\n\nio.print(myFunc(5)); // 15\n")),Object(c.b)("p",null,"It's important to note that closures do not copy the value being referenced, they will simply point to the value in the stack. This means that the value used by the closure is the actual value in memory when the closure is called and not when it's defined:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"let someBoxedValue = 10.5;\n\nlet myFunc = => {\n    return io.print(someBoxedValue);\n};\n\nsomeBoxedValue = 20.0f;\n\nmyFunc();\n")),Object(c.b)("p",null,"If the values in the stack that a closure is referencing go out of scope, the value is copied out of the stack and preserved, so that it will be available and shared among the closures referencing it."),Object(c.b)("h2",{id:"methods"},"Methods"),Object(c.b)("p",null,"In OOP a method is a function that can be called on an object to alter its internal state.\nMelon is not an object oriented language but it provides some syntactic sugar to make functions used as methods more expressive."),Object(c.b)("p",null,"Methods could simply be declared as:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"let myFunc = |obj| =>  {\n    obj.someState = 10;\n};\n")),Object(c.b)("p",null,"Traditionally in object oriented languages the object on which the method has been invoked can be accessed through an implicit argument ",Object(c.b)("inlineCode",{parentName:"p"},"this"),".\nYou can do this in melon by replacing the fat arrow ",Object(c.b)("inlineCode",{parentName:"p"},"=>")," with ",Object(c.b)("inlineCode",{parentName:"p"},"->"),":"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"let myMethod = -> {\n    this.state = 10;\n};\n\nlet obj = { state = 5 };\nmyMethod(obj);\nio.print(obj.state); // 10\n")),Object(c.b)("p",null,"Look at the ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"/melon/docs/types/object#method-access-operator"}),"method access operator")," to understand how you can use method definitions in conjunction with ",Object(c.b)("inlineCode",{parentName:"p"},"Object")," values to do OOP."),Object(c.b)("h2",{id:"variadic-arguments"},"Variadic arguments"),Object(c.b)("p",null,"Functions can consume all the arguments that are provided to them without having to specify the number of arguments they expect in advance:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'let myFunc = |...args| => {\n    io.print("Number of arguments:", #args);\n};\n\nmyFunc(); // Number of arguments: 0\nmyFunc(1, 2); // Number of arguments: 2\n')),Object(c.b)("p",null,"Standard arugments definition can also be mixed with the variadic syntax:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'let myFunc = |a, b, ...rest| => {\n    io.print("a:", a, "b:", b, "number of rest:", #rest);\n};\n\nmyFunc(10, 5); // a: 10 b: 5 number of rest: 0\nmyFunc(1, 2, null, null, null); // a: 1 b: 2 number of rest: 3\n')),Object(c.b)("h2",{id:"further-function-manipulation"},"Further function manipulation"),Object(c.b)("p",null,"There are other ways to manipulate ",Object(c.b)("inlineCode",{parentName:"p"},"Function")," values, they can be found in the ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"/melon/docs/modules/function_module"}),Object(c.b)("inlineCode",{parentName:"a"},"function"))," core module. This module includes ways to do introspection/reflection on ",Object(c.b)("inlineCode",{parentName:"p"},"Function")," values."))}l.isMDXComponent=!0}}]);