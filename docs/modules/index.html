<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.66">
<title data-react-helmet="true">Modules | melon</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Modules | melon"><meta data-react-helmet="true" name="description" content="Melon has a basic but flexible module system. Modules are used by the core system to expose domain specific functionality to the developer and can also be used by the developer to enhance code re-use."><meta data-react-helmet="true" property="og:description" content="Melon has a basic but flexible module system. Modules are used by the core system to expose domain specific functionality to the developer and can also be used by the developer to enhance code re-use."><meta data-react-helmet="true" property="og:url" content="https://daniele-rapagnani.github.io/melon/docs/modules"><link data-react-helmet="true" rel="shortcut icon" href="/melon/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://daniele-rapagnani.github.io/melon/docs/modules"><link rel="stylesheet" href="/melon/styles.6874ab0a.css">
<link rel="preload" href="/melon/styles.bfc3e8ea.js" as="script">
<link rel="preload" href="/melon/runtime~main.08f41170.js" as="script">
<link rel="preload" href="/melon/main.506e7c1e.js" as="script">
<link rel="preload" href="/melon/1.343061b0.js" as="script">
<link rel="preload" href="/melon/2.330af622.js" as="script">
<link rel="preload" href="/melon/43.f3832d12.js" as="script">
<link rel="preload" href="/melon/44.4b500b20.js" as="script">
<link rel="preload" href="/melon/935f2afb.fe183059.js" as="script">
<link rel="preload" href="/melon/17896441.45e4c31b.js" as="script">
<link rel="preload" href="/melon/23d28cd9.17cf9d2d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/melon/"><img class="navbar__logo" src="/melon/img/melon_logo_symbol.png" alt="Melon Programming Language"><strong class="navbar__title">melon</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/melon/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/melon/"><img class="navbar__logo" src="/melon/img/melon_logo_symbol.png" alt="Melon Programming Language"><strong class="navbar__title">melon</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/melon/docs/">Docs</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Melon</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/melon/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Language</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/melon/docs/variables">Variables</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Value Types</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/types/integer">Integer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/types/number">Number</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/types/bool">Boolean</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/types/string">String</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/types/array">Array</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/types/object">Object</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/types/function">Function</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/types/range">Range</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/types/symbol">Symbol</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/types/iterator">Iterator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/types/null">Null</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/melon/docs/control-structures">Control structures</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/melon/docs/operators">Operators</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/melon/docs/modules">Modules</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Core modules</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/modules/array_module">array</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/modules/cli_module">cli</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/modules/compiler_module">compiler</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/modules/debug_module">debug</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/modules/fs_module">fs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/modules/function_module">function</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/modules/gc_module">gc</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/modules/import_module">import</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/modules/integer_module">integer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/modules/io_module">io</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/modules/json_module">json</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/modules/math_module">math</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/modules/number_module">number</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/modules/object_module">object</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/modules/path_module">path</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/modules/random_module">random</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/modules/string_module">string</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/modules/system_module">system</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/melon/docs/modules/types_module">types</a></li></ul></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Modules</h1></header><div class="markdown"><p>Melon has a basic but flexible module system. Modules are used by the core system to expose domain specific functionality to the developer and can also be used by the developer to enhance code re-use.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="core-modules"></a>Core modules<a aria-hidden="true" tabindex="-1" class="hash-link" href="#core-modules" title="Direct link to heading">#</a></h2><p>Core modules are exposed through global variables and are pre-defined. One example is the <a href="/melon/docs/modules/io_module"><code>io</code> module</a> which was used throughout this documentation.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="importing-custom-modules"></a>Importing custom modules<a aria-hidden="true" tabindex="-1" class="hash-link" href="#importing-custom-modules" title="Direct link to heading">#</a></h2><p>Custom modules must be selectively imported by the developer, to do this <code>import</code> can be called:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> </span><span class="token maybe-class-name">MyModule</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">import</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;my-module&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token maybe-class-name">MyModule</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">doSomething</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>As will become apparent in the sections below, <code>import</code> is not a <code>Function</code> but an <code>Object</code>.
It can be called because it has its <a href="/melon/docs/operators#supported-custom-operators"><code>call operator</code></a> overriden, allowing the developer to customise
its behaviour.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="import-path"></a>Import path<a aria-hidden="true" tabindex="-1" class="hash-link" href="#import-path" title="Direct link to heading">#</a></h3><p>The first argument of the <code>import</code> call is used to locate the module&#x27;s source. How this is done depends on the content of the <code>import.paths</code> key which contains an <code>Array</code> of strings:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">paths</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;##/??/index.ms&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;##/../??/index.ms&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div></div></div><p>The path strings are processed top to bottom until a valid file is found.
Special placeholders can be used inside path strings:</p><table><thead><tr><th>Placeholder</th><th>Meaning</th></tr></thead><tbody><tr><td><code>??</code></td><td>The first argument of the <code>import</code> call</td></tr><tr><td><code>##</code></td><td>If the current call to <code>import</code> has been made from <code>a/b/c.ms</code> then <code>##</code> is <code>a/b</code></td></tr><tr><td><code>$$</code></td><td>The path of the entry-point. For example if your entry point is <code>a/b/main.ms</code> then <code>$$</code> is <code>a/b</code></td></tr></tbody></table><p>The default value for <code>import.paths</code> is:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">##/??</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">##/??.ms</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">##/??.mbc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">##/??/index.ms</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">##/??/index.mbc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$$/??</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$$/??.ms</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$$/??.mbc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$$/??/index.ms</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$$/??/index.mbc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$$/mel_seeds/??.ms</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$$/mel_seeds/??.mbc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$$/mel_seeds/??/index.ms</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$$/mel_seeds/??/index.mbc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$$/mel_seeds/??</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">??</span></div></div></div></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p><code>import</code> can also import pre-compiled bytecode, that&#x27;s what the <code>mbc</code> extension stands for.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="defining-custom-modules"></a>Defining custom modules<a aria-hidden="true" tabindex="-1" class="hash-link" href="#defining-custom-modules" title="Direct link to heading">#</a></h2><p>Custom modules are just standard source files which <code>return</code> a value. The value will be the result of the <code>import</code> call when the module is imported:</p><p>In <code>a/my-module.ms</code>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    myVar </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    myFunc </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> io</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello modules!&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div></div></div><p>In <code>a/some-file.ms</code>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> </span><span class="token maybe-class-name">MyModule</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">import</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;my-module&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">io</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">MyModule</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">myVar</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 5</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token maybe-class-name">MyModule</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">myFunc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Hello modules!</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="caching"></a>Caching<a aria-hidden="true" tabindex="-1" class="hash-link" href="#caching" title="Direct link to heading">#</a></h3><p>Modules are cached, this means the the module&#x27;s code is executed only upon first <code>import</code>. Then the returned value is cached and the same value is returned to every subsequent <code>import</code> call. This means that if your module&#x27;s code has any side-effects they will be executed only once:</p><p>In <code>a/my-module.ms</code>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">io</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Importing!&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    myVar </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    myFunc </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> io</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello modules!&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div></div></div><p>In <code>a/some-file.ms</code>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> </span><span class="token maybe-class-name">MyModule</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">import</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;my-module&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> </span><span class="token maybe-class-name">MyModule2</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">import</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;my-module&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token maybe-class-name">MyModule</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">myFunc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Hello modules!</span></div></div></div></div></div><p>Running <code>some-file.ms</code> will output:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Importing!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Hello modules!</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="accessing-the-cache"></a>Accessing the cache<a aria-hidden="true" tabindex="-1" class="hash-link" href="#accessing-the-cache" title="Direct link to heading">#</a></h3><p><code>import</code>&#x27;s cache is exposed through its <code>import.cache</code> key which is just an <code>Object</code> with the key corresponding to the real path on the filesystem of the imported file and the value to the value returned by the module. You can for example clear all <code>import</code>&#x27;s cache by simply doing:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">cache</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/daniele-rapagnani/edit/master/docs/docs/modules.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/melon/docs/operators"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Operators</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/melon/docs/modules/array_module"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">array Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#core-modules" class="table-of-contents__link">Core modules</a></li><li><a href="#importing-custom-modules" class="table-of-contents__link">Importing custom modules</a><ul><li><a href="#import-path" class="table-of-contents__link">Import path</a></li></ul></li><li><a href="#defining-custom-modules" class="table-of-contents__link">Defining custom modules</a><ul><li><a href="#caching" class="table-of-contents__link">Caching</a></li><li><a href="#accessing-the-cache" class="table-of-contents__link">Accessing the cache</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/daniele-rapagnani/melon" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/melon" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2021 Daniele Rapagnani.</div></div></div></footer></div>
<script src="/melon/styles.bfc3e8ea.js"></script>
<script src="/melon/runtime~main.08f41170.js"></script>
<script src="/melon/main.506e7c1e.js"></script>
<script src="/melon/1.343061b0.js"></script>
<script src="/melon/2.330af622.js"></script>
<script src="/melon/43.f3832d12.js"></script>
<script src="/melon/44.4b500b20.js"></script>
<script src="/melon/935f2afb.fe183059.js"></script>
<script src="/melon/17896441.45e4c31b.js"></script>
<script src="/melon/23d28cd9.17cf9d2d.js"></script>
</body>
</html>