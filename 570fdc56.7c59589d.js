(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{100:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return j}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=r.a.createContext({}),s=function(e){var t=r.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},p=function(e){var t=s(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},y=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,l=b(e,["components","mdxType","originalType","parentName"]),p=s(n),y=a,j=p["".concat(i,".").concat(y)]||p[y]||m[y]||o;return n?r.a.createElement(j,c(c({ref:t},l),{},{components:n})):r.a.createElement(j,c({ref:t},l))}));function j(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=y;var c={};for(var b in t)hasOwnProperty.call(t,b)&&(c[b]=t[b]);c.originalType=e,c.mdxType="string"==typeof e?e:a,i[1]=c;for(var l=2;l<o;l++)i[l]=n[l];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}y.displayName="MDXCreateElement"},71:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return b})),n.d(t,"default",(function(){return s}));var a=n(2),r=n(6),o=(n(0),n(100)),i={id:"object",title:"Object",sidebar_label:"Object",slug:"/types/object"},c={unversionedId:"object",id:"object",isDocsHomePage:!1,title:"Object",description:"An Object is container of values where each value is associated to a key.",source:"@site/docs/object.md",slug:"/types/object",permalink:"/melon/docs/types/object",editUrl:"https://github.com/daniele-rapagnani/edit/master/docs/docs/object.md",version:"current",sidebar_label:"Object",sidebar:"someSidebar",previous:{title:"Array",permalink:"/melon/docs/types/array"},next:{title:"Function",permalink:"/melon/docs/types/function"}},b=[{value:"Creating objects",id:"creating-objects",children:[]},{value:"Reading values",id:"reading-values",children:[]},{value:"Writing values",id:"writing-values",children:[]},{value:"Keys from expressions",id:"keys-from-expressions",children:[]},{value:"Non-string keys",id:"non-string-keys",children:[]},{value:"Reference keys",id:"reference-keys",children:[]},{value:"Symbol keys",id:"symbol-keys",children:[]},{value:"Iterating over keys",id:"iterating-over-keys",children:[]},{value:"Prototype",id:"prototype",children:[]},{value:"Method access operator",id:"method-access-operator",children:[]},{value:"Further object manipulation",id:"further-object-manipulation",children:[]}],l={rightToc:b};function s(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"An ",Object(o.b)("inlineCode",{parentName:"p"},"Object")," is container of values where each value is associated to a key.\nValues are also called properties or fields."),Object(o.b)("h2",{id:"creating-objects"},"Creating objects"),Object(o.b)("p",null,"An ",Object(o.b)("inlineCode",{parentName:"p"},"Object")," can be created using curly braces, for example you can create an empty object with:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"let myObj = {};\n")),Object(o.b)("p",null,"An ",Object(o.b)("inlineCode",{parentName:"p"},"Object")," can be initialized with some string keys/values:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'let myObj = {\n    "myKey" = "my value",\n    "Another key" = 5.0,\n    "Yet another key" = true\n};\n')),Object(o.b)("p",null,"If the key is a string made up of alphanumeric characters (plus underscores) then the double quotes can be omitted:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'let myObj = {\n    myKey = "My Value",\n    my_key2 = "My Other Value"\n};\n')),Object(o.b)("h2",{id:"reading-values"},"Reading values"),Object(o.b)("p",null,"If you have the key, you can read the value associated to it by using the dot notation ",Object(o.b)("inlineCode",{parentName:"p"},"."),":"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'let myObj = { myKey = "My Value" };\n\nio.print(myObj.myKey); // "My Value"\n')),Object(o.b)("p",null,"Values can also be read using the array access operator ",Object(o.b)("inlineCode",{parentName:"p"},"[]"),", in this case you can use any valid expression to compose the key:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'let myObj = { myKey = "My Value" };\n\nio.print(myObj.myKey);              // "My Value"\nio.print(myObj["myKey"]);           // "My Value"\nio.print(myObj["my" .. "Key"]);     // "My Value"\n\nlet myKeyString = "myKey";\nio.print(myObj[myKeyString]);       // "My Value"\n')),Object(o.b)("h2",{id:"writing-values"},"Writing values"),Object(o.b)("p",null,"Values can be written using both the dot notation ",Object(o.b)("inlineCode",{parentName:"p"},".")," and the array access operator ",Object(o.b)("inlineCode",{parentName:"p"},"[]"),":"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'let myObj = {};\n\nmyObj.myKey = "My Value";\nio.print(myObj.myKey);              // "My Value"\n\nmyObj["myKey"] = "My Value";\nio.print(myObj.myKey);              // "My Value"\n\nmyObj["my" .. "Key"] = "My Value";\nio.print(myObj.myKey);              // "My Value"\n\nlet myKeyString = "myKey";\nmyObj[myKeyString] = "My Value";\nio.print(myObj.myKey);              // "My Value"\n')),Object(o.b)("h2",{id:"keys-from-expressions"},"Keys from expressions"),Object(o.b)("p",null,"Keys can also be initialized from an expression using brackets in the key definition:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'let myObj = {\n    ["my" .. "Key"] = "My Value",\n    my_key2 = "My Other Value"\n};\n')),Object(o.b)("h2",{id:"non-string-keys"},"Non-string keys"),Object(o.b)("p",null,"Keys are not restricted to keys only, they can also be any of the other types.\n",Object(o.b)("inlineCode",{parentName:"p"},"Booleans"),", ",Object(o.b)("inlineCode",{parentName:"p"},"Integers"),", ",Object(o.b)("inlineCode",{parentName:"p"},"Numbers")," and ",Object(o.b)("inlineCode",{parentName:"p"},"Strings")," will compare by value and can be defined using the brackets ",Object(o.b)("inlineCode",{parentName:"p"},"[key]")," syntax explained above:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'let myObj = {\n    [10] = "My value",\n    [(10 + 10)] = 1000.0,\n    [true] = 10\n};\n\nio.print(myObject[10]); // My value\nio.print(myObject[20]); // 1000.0\nio.print(myObject[true]); // 10\n')),Object(o.b)("h2",{id:"reference-keys"},"Reference keys"),Object(o.b)("p",null,"A reference can also be used as key in an object, such as a reference to a ",Object(o.b)("inlineCode",{parentName:"p"},"Closure"),", an ",Object(o.b)("inlineCode",{parentName:"p"},"Array"),", another ",Object(o.b)("inlineCode",{parentName:"p"},"Object"),", and so on. When this is done, the address of the reference will be used as the key, this means that you have to use the exact same instance to get the value back:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"let myObjKey = { myValue = true };\nlet myObj = {\n    [myObjKey] = 10\n};\n\nio.print(myObj[myObjKey]); // 10\n\nmyObjKey = { myValue = true };\n\nio.print(myObj[myObjKey]); // null\n\n")),Object(o.b)("h2",{id:"symbol-keys"},"Symbol keys"),Object(o.b)("p",null,"A ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"/melon/docs/types/symbol"}),Object(o.b)("inlineCode",{parentName:"a"},"Symbol"))," key will match only a reference to itself. Using a ",Object(o.b)("inlineCode",{parentName:"p"},"Symbol")," as an object's key can be used to control the accessibility of an ",Object(o.b)("inlineCode",{parentName:"p"},"Object"),"'s value and to avoid accidental collisions between keys:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'let myPrivateSymbol = $$;\n\nlet myObj = {\n    [myPrivateSymbol] = "My private value"\n};\n\n// The only way to access the value is with a reference\n// to the symbol just created.\n\nio.print(myObj[myPrivateSymbol]); // My private value\n\nmyPrivateSymbol = $$;\nio.print(myObj[anotherSymbol]); // null\n')),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(o.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(o.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(o.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(o.b)("p",{parentName:"div"},"This technique is used extensively throughout melon's core and modules.\nOne example is ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"/melon/docs/operators#operators-overloading"}),"operator overloading"),"."))),Object(o.b)("h2",{id:"iterating-over-keys"},"Iterating over keys"),Object(o.b)("p",null,"If you retrive the ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"/melon/docs/types/iterator"}),Object(o.b)("inlineCode",{parentName:"a"},"Iterator"))," from an ",Object(o.b)("inlineCode",{parentName:"p"},"Object")," using the iterator operator ",Object(o.b)("inlineCode",{parentName:"p"},">"),", you can use this iterator to iterate over the keys of an ",Object(o.b)("inlineCode",{parentName:"p"},"Object"),", for example in a ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"/melon/docs/control-structures#for-in-loops"}),Object(o.b)("inlineCode",{parentName:"a"},"for-in"))," loop."),Object(o.b)("h2",{id:"prototype"},"Prototype"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"Objects")," can be chained together by making one a prototype for the other. This is done using the ",Object(o.b)("strong",{parentName:"p"},"bless operator")," ",Object(o.b)("inlineCode",{parentName:"p"},"@"),":"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"let myObjA = {};\nlet myObjB = {} @ myObjA;\n\n// myObjA is the prototype of myObjB\n")),Object(o.b)("p",null,"When an attempt to read a non existing property is made on an object, the object's prototype (if any) will be searched for the missing property and, if found, the prototype's property's value will be returned instead of ",Object(o.b)("inlineCode",{parentName:"p"},"null"),"."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"let myObjA = { a = \"I'm unexpectedly here!\" };\nlet myObjB = { b = \"I'm clearly here\" } @ myObjA;\n\nio.print(myObjB.b); // I'm clearly here\nio.print(myObjB.a); // I'm unexpectedly here!\n")),Object(o.b)("p",null,"This lookup is performed recursively on the whole prototype chain until an object with no prototype is found. If the requested key is not found on any of the prototypes the resulting value will be ",Object(o.b)("inlineCode",{parentName:"p"},"null"),"."),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(o.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(o.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(o.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(o.b)("p",{parentName:"div"},"This mechanism can be used to do OOP, specifically ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://en.wikipedia.org/wiki/Prototype-based_programming"}),"prototype based programming"),"."))),Object(o.b)("h2",{id:"method-access-operator"},"Method access operator"),Object(o.b)("p",null,"As we know, an ",Object(o.b)("inlineCode",{parentName:"p"},"Object")," can contain a ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"/melon/docs/types/function"}),Object(o.b)("inlineCode",{parentName:"a"},"Function"))," as one of its values. Most OOP languages provide the concept of a ",Object(o.b)("em",{parentName:"p"},"method"),", which is a function which is invoked on an object and is able to alter its internal state by using a reference to the object on which it's invoked.\nIn melon we can achieve a similar result with:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"let myObj = {\n    state = 10,\n    changeState = |obj| => {\n        obj.state = obj.state + 1;\n    }\n};\n\nmyObj.changeState(myObj);\nio.print(myObj.state); // 11\n")),Object(o.b)("p",null,"The ",Object(o.b)("inlineCode",{parentName:"p"},"myObj")," in the example above si clearly redundant so melon provides syntactic sugar to make it more expressive:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"let myObj = {\n    state = 10,\n    changeState = -> {\n        this.state = this.state + 1;\n    },\n    changeState2 = |obj| => {\n        obj.state = obj.state - 1;\n    }\n};\n\nmyObj->changeState();\nio.print(myObj.state); // 11\n\n// This still works\nmyObj.changeState(myObj);\nio.print(myObj.state); // 12\n\n// This is also valid\nmyObj->changeState2();\nio.print(myObj.state); // 11\n")),Object(o.b)("p",null,"Basically the ",Object(o.b)("strong",{parentName:"p"},"method access")," ",Object(o.b)("inlineCode",{parentName:"p"},"->")," operator silently passes the object on which it is being used as the first parameter of the closure you are accessing with it."),Object(o.b)("p",null,"See also ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"/melon/docs/types/function"}),Object(o.b)("inlineCode",{parentName:"a"},"Function"))," for a better understanding of the ",Object(o.b)("inlineCode",{parentName:"p"},"this")," keyword and of ",Object(o.b)("inlineCode",{parentName:"p"},"->")," vs ",Object(o.b)("inlineCode",{parentName:"p"},"=>")," when creating closures."),Object(o.b)("h2",{id:"further-object-manipulation"},"Further object manipulation"),Object(o.b)("p",null,"There are other ways to manipulate ",Object(o.b)("inlineCode",{parentName:"p"},"Object")," values, they can be found in the ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"/melon/docs/modules/object_module"}),Object(o.b)("inlineCode",{parentName:"a"},"object"))," core module."))}s.isMDXComponent=!0}}]);